$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "http://purl.org/iscc/schema/iscc-entry.json"
title: "IsccEntry"
type: object
description: |
  ISCC asset data for indexing and search.

  When adding assets: `iscc_id` is required.
  When searching: `iscc_id` is optional (typically only `iscc_code` or `units` is provided).

  **Requirement**: At least one of `iscc_code` or `units` must be provided (validated at runtime).

  The complete object contains all three fields (iscc_id, iscc_code, and units).
properties:
  iscc_id:
    $ref: "./CommonProperties.yaml#/properties/iscc_id"
  iscc_code:
    $ref: "./CommonProperties.yaml#/properties/iscc_code"
  units:
    type: array
    description: List of ISCC-UNITs as canonical strings (variable-length, 64-256 bits)
    items:
      $ref: "./CommonProperties.yaml#/properties/iscc_unit"
    minItems: 2
  metadata:
    type: object
    additionalProperties: true
    description: |
      Optional application-specific metadata. This field allows clients to store
      custom data without requiring API changes. The server stores this data
      opaquely without validation.
    example:
      source: "example.com"
      uploaded_by: "user123"
      content_type: "image/jpeg"
      tags: ["nature", "landscape"]
example:
  iscc_id: "ISCC:MAIGIIFJRDGEQQAA"
  iscc_code: "ISCC:KECYCMZIOY36XXGZ7S6QJQ2AEEXPOVEHZYPK6GMSFLU3WF54UPZMTPY"
  units:
    - "ISCC:AADYCMZIOY36XXGZ5B5BME7EIPPXRFKYQZ7VXKI7V55AEQQE67A33BY"
    - "ISCC:EED7ZPIEYNACCLXXZSS2LIM6JVXDYGCG2QSMC7DCPER4MYJPJATIM4Y"
    - "ISCC:GADVJB6OD2XRTERK3G4KOFHGDJCBYEXAZCZLVVSA7MMURDPMJ5S5JWI"
    - "ISCC:IAD6TOYXXSR7FSN7TRRRNOKQ6JCFK3ZF4KRFVEQRQ4M4PDPUR5H7GHQ"
