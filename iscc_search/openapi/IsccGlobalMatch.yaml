$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "http://purl.org/iscc/schema/iscc-global-match.json"
title: "IsccGlobalMatch"
type: object
description: |
  A single match result from ISCC lookup search. Contains the matched ISCC-ID,
  aggregated score, and detailed bit-match breakdown per unit_type.
required:
  - iscc_id
  - score
  - types
properties:
  iscc_id:
    type: string
    description: The matched ISCC-ID from the index
    pattern: "^ISCC:[A-Z2-7]{16,}$"
    example: "ISCC:MAIGIIFJRDGEQQAA"
  score:
    type: number
    description: |
      Aggregated score across all unit_types. Metric semantics (bit-length, NPHD distance, etc.)
      are defined at the result collection level, not per match.
    minimum: 0
    example: 448
  types:
    type: object
    description: |
      Per-unit_type scores. Keys are unit type names (e.g., "CONTENT_TEXT_V0"),
      values are numeric scores whose semantics depend on the search backend
      (bit-length for lookup index, NPHD distance for usearch, etc.).
    additionalProperties:
      type: number
      minimum: 0
    example:
      CONTENT_TEXT_V0: 256
      DATA_NONE_V0: 128
      INSTANCE_NONE_V0: 64
  metadata:
    $ref: "./IsccMetadata.yaml"
    description: |
      Optional asset metadata, denormalized from the index for convenience.
      Useful for result rendering and client-side filtering without additional lookups.

      This field allows clients to access asset metadata directly in search results
      without requiring additional get_asset() calls.
example:
  iscc_id: "ISCC:MAIGIIFJRDGEQQAA"
  score: 448
  types:
    CONTENT_TEXT_V0: 256
    DATA_NONE_V0: 128
    INSTANCE_NONE_V0: 64
  metadata:
    name: "Example Document"
    filename: "example.pdf"
