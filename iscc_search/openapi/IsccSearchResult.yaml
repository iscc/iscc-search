$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "http://purl.org/iscc/schema/iscc-search-result.json"
title: "IsccSearchResult"
type: object
description: |
  Search result for a single query asset. Contains the original query and matched ISCCs.
required:
  - query
  - global_matches
properties:
  query:
    $ref: "./IsccQuery.yaml"
    description: The original query asset (may include auto-generated iscc_id)
  global_matches:
    type: array
    description: Asset-level ISCC-UNIT matches, ordered by relevance (best first)
    items:
      $ref: "./IsccGlobalMatch.yaml"
    example:
      - iscc_id: "ISCC:MAIGIIFJRDGEQQAA"
        score: 448
        matches:
          CONTENT_TEXT_V0: 256
          DATA_NONE_V0: 128
          INSTANCE_NONE_V0: 64
      - iscc_id: "ISCC:MAIGXXFZRDGEQQBB"
        score: 384
        matches:
          CONTENT_TEXT_V0: 256
          DATA_NONE_V0: 128
  chunk_matches:
    type: array
    description: Segment-level simprint matches, ordered by relevance (best first)
    items:
      $ref: "./draft/IsccChunkMatch.yaml"
    default: []
example:
  query:
    iscc_id: "ISCC:MAIGXXFZRDGEQQCC"
    iscc_code: "ISCC:KECYCMZIOY36XXGZ7S6QJQ2AEEXPOVEHZYPK6GMSFLU3WF54UPZMTPY"
    units:
      - "ISCC:AADYCMZIOY36XXGZ5B5BME7EIPPXRFKYQZ7VXKI7V55AEQQE67A33BY"
      - "ISCC:EED7ZPIEYNACCLXXZSS2LIM6JVXDYGCG2QSMC7DCPER4MYJPJATIM4Y"
  global_matches:
    - iscc_id: "ISCC:MAIGIIFJRDGEQQAA"
      score: 448
      matches:
        CONTENT_TEXT_V0: 256
        DATA_NONE_V0: 128
        INSTANCE_NONE_V0: 64
    - iscc_id: "ISCC:MAIGXXFZRDGEQQBB"
      score: 384
      matches:
        CONTENT_TEXT_V0: 256
        DATA_NONE_V0: 128
