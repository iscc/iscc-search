$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "http://purl.org/iscc/schema/iscc-simprint.json"
title: "IsccSimprint"
type: object
description: |
  A simprint entry associating a similarity hash with its location in the source content.

  Simprints are headerless base64-encoded hashes that identify content segments (passages,
  image regions, audio/video clips). Each simprint must include positioning metadata to
  enable chunk retrieval and result presentation.

  **Offset/size interpretation** depends on the parent asset's modality:
  - **Text**: offset=byte_position, size=byte_length (UTF-8)
  - **Audio/Video**: offset=milliseconds_start, size=milliseconds_duration
  - **Image**: offset=packed(x,y), size=packed(width,height)

  See IsccChunk schema documentation for detailed offset/size semantics.
required:
  - simprint
  - offset
  - size
properties:
  simprint:
    type: string
    description: |
      Base64-encoded simprint hash (headerless, variable length).

      Typical lengths:
      - 128-bit: 22 chars (base64url without padding)
      - 256-bit: 42 chars (without padding)
    pattern: "^[A-Za-z0-9+/_=-]+$"
    minLength: 16
    example: "AXvu3tp2kF8mN9qL4rT1sZ"
  offset:
    type: integer
    description: |
      Starting position/time/coordinates in the source content.

      **Interpretation by modality**:
      - Text: UTF-8 byte offset (0-indexed)
      - Audio/Video: Milliseconds from start (0-indexed)
      - Image: Packed coordinates (x << 16 | y)

      See IsccChunk documentation for detailed semantics.
    minimum: 0
    maximum: 4294967295
    example: 12500
  size:
    type: integer
    description: |
      Extent/duration/dimensions of the content segment.

      **Interpretation by modality**:
      - Text: UTF-8 byte length
      - Audio/Video: Duration in milliseconds
      - Image: Packed dimensions (width << 16 | height)

      See IsccChunk documentation for detailed semantics.
    minimum: 0
    maximum: 4294967295
    example: 350
example:
  simprint: "AXvu3tp2kF8mN9qL4rT1sZ"
  offset: 12500
  size: 350
